<!DOCTYPE html>
<html lang="en" data-theme="auto"
  class="h-full bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-50 antialiased">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Harshit's Blog{% endblock %}</title>
  <meta name="description"
    content="{% block description %}Tech insights, code adventures, and system thinking by Harshit Vijay{% endblock %}" />

  <!-- Canonical & SEO -->
  {% if canonical_url %}
  <link rel="canonical" href="{{ canonical_url }}">{% endif %}
  <meta name="author" content="Harshit Vijay" />
  <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">

  <meta property="og:type" content="website">
  <meta property="og:title" content="{% block og_title %}{{ self.title()|striptags }}{% endblock %}">
  <meta property="og:description" content="{% block og_description %}{{ self.description()|striptags }}{% endblock %}">
  {% if og_image %}
  <meta property="og:image" content="{{ og_image }}">{% endif %}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ self.og_title()|striptags }}">
  <meta name="twitter:description" content="{{ self.og_description()|striptags }}">
  {% if og_image %}
  <meta name="twitter:image" content="{{ og_image }}">{% endif %}

  <!-- Favicon (uncomment when ready) -->
  <!-- <link rel="icon" type="image/png" href="/static/favicon.png"> -->

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Fira+Code:wght@400;500;600&display=swap"
    rel="stylesheet">

  <!-- Prism.js Syntax Highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet"
    media="(prefers-color-scheme: light)" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"
    media="(prefers-color-scheme: dark)" />

  <link rel="stylesheet" href="/BLOGS/static/styles/tailwind.css">

  {% block styles %}{% endblock %}
</head>

<body class="min-h-full flex flex-col">
  <div class="fixed inset-0 bg-black/50 opacity-0 hidden z-50 transition-opacity" id="scrim"></div>

  <header
    class="sticky top-0 z-40 bg-white/70 backdrop-blur-md dark:bg-slate-900/70 shadow-sm border-b border-slate-200 dark:border-slate-800">
    <div class="container mx-auto flex items-center justify-between gap-4 p-4 lg:px-6">
      <a href="/BLOGS/" class="flex items-center gap-2 font-bold text-lg text-slate-900 dark:text-white">
        <span
          class="w-9 h-9 grid place-items-center rounded-md bg-gradient-to-tr from-blue-500 to-purple-600 text-white font-extrabold shadow-lg">HV</span>
        Harshit's Blog
      </a>

      <nav class="hidden lg:flex items-center gap-2 font-semibold">
        <a href="/BLOGS/"
          class="py-2 px-3 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition">Home</a>
        <a href="/BLOGS/about.html"
          class="py-2 px-3 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition">About</a>
        <a href="https://github.com/coder-Harshit" target="_blank" rel="noopener"
          class="py-2 px-3 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition">GitHub</a>
        <a href="https://linkedin.com/in/harshit-vijay-coderv" target="_blank" rel="noopener"
          class="py-2 px-3 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition">LinkedIn</a>
        <button
          class="flex-shrink-0 w-8 h-8 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition"
          id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">🌓</button>
      </nav>

      <button
        class="lg:hidden p-2 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition"
        id="open-drawer" aria-label="Open menu">☰</button>
    </div>
  </header>

  <main class="flex-grow pt-8">
    <div class="container mx-auto px-4">{% block content %}{% endblock %}</div>
  </main>

  <footer
    class="mt-12 py-8 bg-slate-100 dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 text-center text-sm text-slate-500 dark:text-slate-400">
    <p>&copy; {{ current_year or 2025 }} Harshit Vijay. Built with Python and Tailwind CSS. 🚀</p>
  </footer>

  <button id="backToTop" aria-label="Back to top"
    class="fixed right-4 bottom-4 p-3 rounded-full bg-slate-800 text-white shadow-lg transition-transform hover:-translate-y-1 hidden">↑</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
  <script>
    // ===== Theme toggle =====
    const themeToggle = document.getElementById('theme-toggle');
    const drawerTheme = document.getElementById('drawer-theme');
    const htmlEl = document.documentElement;
    const savedTheme = localStorage.getItem('theme') || 'auto';
    htmlEl.setAttribute('data-theme', savedTheme);

    function cycleTheme(btn) {
      const current = htmlEl.getAttribute('data-theme');
      let next;
      if (current === 'light') { next = 'dark'; }
      else if (current === 'dark') { next = 'auto'; }
      else { next = 'light'; }
      htmlEl.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      btn && (btn.textContent = next === 'light' ? '🌙' : next === 'dark' ? '☀️' : '🌓');
    }
    [themeToggle, drawerTheme].forEach(btn => {
      if (btn) {
        const t = savedTheme === 'light' ? '🌙' : savedTheme === 'dark' ? '☀️' : '🌓';
        btn.textContent = btn.id === 'drawer-theme' ? (t + ' Theme') : t;
        btn.addEventListener('click', () => cycleTheme(btn));
      }
    });

    // ===== Mobile drawer =====
    const drawer = document.getElementById('drawer');
    const scrim = document.getElementById('scrim');
    const openBtn = document.getElementById('open-drawer');
    const closeBtn = document.getElementById('close-drawer');
    const toggleDrawer = (open) => {
      drawer.classList.toggle('open', open);
      drawer.setAttribute('aria-hidden', String(!open));
      scrim.classList.toggle('show', open);
      document.body.style.overflow = open ? 'hidden' : '';
    };
    openBtn && openBtn.addEventListener('click', () => toggleDrawer(true));
    closeBtn && closeBtn.addEventListener('click', () => toggleDrawer(false));
    scrim && scrim.addEventListener('click', () => toggleDrawer(false));

    // ===== Back to top =====
    const backBtn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      backBtn.style.display = window.scrollY > 600 ? 'block' : 'none';
    });
    backBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // ===== Client-side search hook (index page wires this up) =====
    window.__globalSearchInputs = ['search-input', 'drawer-search']
      .map(id => document.getElementById(id))
      .filter(Boolean);
  </script>

  {% block scripts %}{% endblock %}
</body>

</html>